<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>Frontend Mentor | Intro component with sign up form</title>
  <link rel="stylesheet" href="./css/styles.css">

  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  <!-- <style>
    #first_name_container > div {
      border-color: red;
    }
    #first_name_container img {
      visibility: visible;
    }
    #first_name_container > #first_name_error {
      content: "error";
      visibility: visible;
    }
  </style> -->
</head>

<body class="px-4 pt-16 font-sans text-gray-200 bg-red-500"
  style="background-image: url(./images/bg-intro-mobile.png);">
  <div class="md:justify-around md:flex md:items-center">
    <div class="text-center md:w-1/3">
      <h1 class="text-3xl font-extrabold leading-8 lg:text-5xl lg:leading-tight">Learn to code by watching others</h1>
  
      <p class="mt-6 font-semibold lg:text-xl">
        See how experienced developers solve problems in real-time. Watching scripted tutorials is great,
        but understanding how developers think is invaluable.
      </p>
  
    </div>
    <div class="md:w-full md:max-w-lg md:mt-12">
      <div class="w-full px-4 py-2 mt-12 text-center bg-purple-800 rounded-md shadow-lg md:py-4 md:mt-0"><span class="font-bold">Try it free 7 days</span> then
        $20/mo. thereafter</div>
  
      <div class="px-6 py-8 mt-6 text-gray-900 bg-white rounded-md md:py-6">
        <div id="first_name_container">
          <div
            class="relative items-center h-16 px-4 py-3 mt-2 font-bold text-gray-900 bg-white border border-gray-600 rounded-md">
            <div class="mr-12">
              <input id="first_name_input" aria-label="First Name input" name="first_name" class="w-full mt-2 font-bold text-gray-900 placeholder-gray-600 focus:outline-none" type="text"
                placeholder="First Name">
            </div>
            <div class="absolute top-0 right-0 h-full px-6 py-5 rounded-r-md">
              <img class="invisible"  src="./images/icon-error.svg" alt="error" />
            </div>
          </div>
          <p class="invisible pr-2 text-xs text-right text-red-600 error_msg">Error</p>
        </div>
        <div id="last_name_container">
          <div
            class="relative items-center h-16 px-4 py-3 mt-2 font-bold text-gray-900 bg-white border border-gray-600 rounded-md">
            <div class="mr-12">
              <input id="last_name_input" aria-label="Last Name input" name="last_name" class="w-full mt-2 font-bold text-gray-900 placeholder-gray-600 focus:outline-none" type="text"
                placeholder="Last Name">
            </div>
            <div class="absolute top-0 right-0 h-full px-6 py-5 rounded-r-md">
              <img class="invisible"  src="./images/icon-error.svg" alt="error" />
            </div>
          </div>
          <p class="invisible pr-2 text-xs text-right text-red-600 error_msg">Error</p>
        </div>

        <div id="email_container">
          <div
            class="relative items-center h-16 px-4 py-3 mt-2 font-bold text-gray-900 bg-white border border-gray-600 rounded-md">
            <div class="mr-12">
              <input id="email_input" aria-label="Email input" name="email_address" class="w-full mt-2 font-bold text-gray-900 placeholder-gray-600 focus:outline-none" type="text"
                placeholder="Email Address">
            </div>
            <div class="absolute top-0 right-0 h-full px-6 py-5 rounded-r-md">
              <img class="invisible" src="./images/icon-error.svg" alt="error" />
            </div>
          </div>
          <p class="invisible pr-2 text-xs text-right text-red-600 error_msg">Error</p>
        </div>
        <div id="password_container">
          <div
            class="relative items-center h-16 px-4 py-3 mt-2 font-bold text-gray-900 bg-white border border-gray-600 rounded-md">
            <div class="mr-12">
              <input id="password_input" aria-label="Password input" name="password" class="w-full mt-2 font-bold text-gray-900 placeholder-gray-600 focus:outline-none" type="password"
                placeholder="Password">
            </div>
            <div class="absolute top-0 right-0 h-full px-6 py-5 rounded-r-md">
              <img  class="invisible" src="./images/icon-error.svg" alt="error" />
            </div>
          </div>
          <p class="invisible pr-2 text-xs text-right text-red-600 error_msg">Error</p>
        </div>

        <button id="form_button"
          class="block w-full p-4 mt-4 text-lg font-extrabold text-center text-gray-100 uppercase bg-green-500 border-b-4 border-green-600 rounded-md shadow-md hover:bg-green-400">Claim
          your free trial</button>
  
        <span class="block mx-4 mt-4 text-xs text-center text-gray-600">By clicking the button, you are agreeing to our <a
            href="#" class="font-bold text-center text-red-500 whitespace-no-wrap">Terms and Services</a></span>
      </div>
    </div>
  </div>

  <footer>
    <div class="mt-12 mb-2 attribution">
      Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
      Coded by <a href="https://www.frontendmentor.io/profile/sagarkaurav">Sagar Kaurav</a>.
      <a href="https://github.com/sagarkaurav">Github</a>
    </div>
  </footer>
  <script>
    function showError(elm, error) {
      let errorMsg = elm.getElementsByClassName('error_msg')[0];
      if(errorMsg.classList.contains('invisible')) {
        errorMsg.classList.remove('invisible');
      }
      errorMsg.innerHTML = error;
      let childDiv = elm.querySelector('div');
      let errorImg = elm.querySelector('img');
      if(!childDiv.classList.contains('border-red-500')){
        childDiv.classList.add('border-red-500');
      }
      if(errorImg.classList.contains('invisible')) {
        errorImg.classList.remove('invisible');
      }
    }
    function removeError(elm) {
      let errorMsg = elm.getElementsByClassName('error_msg')[0];
      if(!errorMsg.classList.contains('invisible')) {
        errorMsg.classList.add('invisible');
      }
      errorMsg.innerHTML = 'error';
      let childDiv = elm.querySelector('div');
      let errorImg = elm.querySelector('img');
      if(childDiv.classList.contains('border-red-500')) {
        childDiv.classList.remove('border-red-500');
      }
      if(!errorImg.classList.contains('invisible')) {
        errorImg.classList.add('invisible');
      } 
    }
    window.onload = function() {
      let firstNameIn = document.getElementById('first_name_input');
      let lastNameIn = document.getElementById('last_name_input');
      let emailIn = document.getElementById('email_input');
      let passwordIn = document.getElementById('password_input');

      let firstNameCont = document.getElementById('first_name_container');

      let lastNameCont = document.getElementById('last_name_container');
      let emailCont = document.getElementById('email_container');
      let passwordCont = document.getElementById('password_container');
      let formBtn = document.getElementById('form_button');
      // This regular expression is from stackoverflow
      // solution link: https://stackoverflow.com/a/46181
      const email_regx = /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;
      formBtn.addEventListener('click', function(){
        if(firstNameIn.value === "") {
          showError(firstNameCont, 'First Name cannot be empty');
        }
        else{
          removeError(firstNameCont);
        }
        if(lastNameIn.value === "") {
          showError(lastNameCont, "Last Name cannot be empty");
        }
        else{
          removeError(lastNameCont);
        }
        if(!email_regx.test(emailIn.value)) {
          showError(emailCont, "Looks like this is not an email");
        }
        else{
          removeError(emailCont)
        }
        if(passwordIn.value === "") {
          showError(passwordCont, "Password cannot be empty");
        }
        else{
          removeError(passwordCont);
        }
      });
    }
  </script>
</body>

</html>
